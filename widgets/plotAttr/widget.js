/* 2023-8-11 09:34:01 | 版权所有 山维科技 http://www.sunwaysurvey.com.cn */
function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(n){var t=function(){"use strict";_inherits(e,n.widget.BaseWidget);var t=_createSuper(e);function e(){return _classCallCheck(this,e),t.apply(this,arguments)}return _createClass(e,[{key:"view",get:function(){return{type:"window",url:"view.html",style:"dark",windowOptions:{skin:"layer-mars-dialog animation-scale-up",width:250,position:{top:10,left:5,bottom:30}}}}},{key:"create",value:function(){}},{key:"winCreateOK",value:function(t,e){this.viewWindow=e}},{key:"activate",value:function(){}},{key:"disable",value:function(){var t=this.config.graphic;t&&t._minPointNum&&(t.stopEditing(),this.config.sendSaveEntity)&&this.config.sendSaveEntity()}},{key:"getMinPointNum",value:function(){var t=this.config.graphic;return t&&t._minPointNum?t._minPointNum:3}},{key:"getMaxPointNum",value:function(){var t=this.config.graphic;return t&&t._maxPointNum?t._maxPointNum:999}},{key:"defaultAttrList",get:function(){return[{name:"id",label:"主键",type:"label",defval:""},{name:"name",label:"名称",type:"text",defval:""},{name:"remark",label:"备注",type:"textarea",defval:""}]}},{key:"getAttrList",value:function(){return this.config.attrList||this.defaultAttrList}},{key:"getLayerName",value:function(){var t=this.config.graphic;return(null==t||null==(t=t._layer)?void 0:t.name)||""}},{key:"startEditing",value:function(t,e){t&&(this.config.graphic=t),e&&(this.config.lonlats=e),null!=this.viewWindow&&(t=this.config.graphic,e=this.config.lonlats,t=_objectSpread(_objectSpread({},t.options),{},{type:t.type,style:t.style}),console.log("开始编辑属性",t),this.viewWindow.plotEdit.startEditing(t,e))}},{key:"updateStyle2map",value:function(t){console.log("更新style样式",t),this.config.graphic.style=t}},{key:"updatePoints2map",value:function(t){console.log("更新坐标",t),this.config.graphic.positions=t}},{key:"updateAttr2map",value:function(t){this.config.graphic.attr=t}},{key:"centerCurrentEntity",value:function(){this.config.graphic.flyTo()}},{key:"deleteEntity",value:function(){var t=this.config.graphic;t.stopEditing&&t.stopEditing(),t.remove(),this.disableBase()}},{key:"getGeoJson",value:function(){var t=this.config.graphic,e=t.toGeoJSON();return e.properties._layer=t._layer.name,e}}]),e}();n.widget.bindClass(t)}((window,mars3d));