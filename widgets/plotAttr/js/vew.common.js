/* 2023-8-11 09:34:01 | 版权所有 山维科技 http://www.sunwaysurvey.com.cn */
$(function(){$(window).resize(refHeight),refHeight(),$(".mp_tab_tit li").click(function(){if($(this).hasClass("cur")||$(this).hasClass("disabled"))return!1;var e=$(this),t=e.index(),e=(e.addClass("cur").siblings("li").removeClass("cur"),e.parent().siblings(".mp_tab_con").children().eq(t).addClass("cur").siblings().removeClass("cur"),$(this).attr("id"));localforage.setItem(storageName,e)}),$("#tab_attr").click(),$(".open").click(changeOpenShowHide)});var storageName="mars3d_plotAttr";function tab2attr(){localforage.getItem(storageName).then(function(e){(null!=e?$("#"+e):$("#tab_attr")).click()})}function changeOpenShowHide(){var e=$(this).siblings(),t=$(this).children(".tree_icon");e.toggle(),e.is(":hidden")?t.html("+"):t.html("-")}function refHeight(){$(".mp_tab_card").height($(".mp_box").height()-$(".mp_head").height()-1),$(".mp_tree").height($(".mp_tab_card").height()-32),$(".mp_mark").height($(".mp_tab_card").height()-80)}!function(_){var t={select:"mp_select",select_text:"mp_select_text",select_ul:"mp_select_ul"};_.fn.extend({select:function(e){var l=_.extend({},t,e);return this.each(function(){var s=_(this),t=(void 0!==s.data("value")&&""!==s.data("value")&&s.val(s.data("value")),[]),e=(t.push('<div class="'+s.attr("class")+'">'),t.push('<div class="'+l.select_text+'">'+s.find(":selected").text()+"</div>"),t.push('<ul class="'+l.select_ul+'">'),s.children("option").each(function(){var e=_(this);s.data("value"),e.val(),t.push('<li data-value="'+e.val()+'">'+e.text()+"</li>")}),t.push("</ul>"),t.push("</div>"),_(t.join(""))),i=e.find("."+l.select_text),a=e.find("."+l.select_ul);s.after(e),s.hide(),e.click(function(e){_(this).toggleClass("mp_selected"),_(this).find("."+l.select_ul).slideToggle().end().siblings("div."+l.select).find("."+l.select_ul).slideUp(),e.stopPropagation()}),_("body").click(function(){a.slideUp()}),a.on("click","li",function(){var e=_(this),t=e.addClass("selecton").siblings("li").removeClass("selecton").end().data("value").toString();t!==s.attr("data-value")&&(i.text(e.text()),s.attr("data-value",t),s.change())})})},progress:function(u){var o="puiprogress",p="puiprogress_bg",g="puiprogress_btn",v="puiprogress_bar",f="puiprogress_text";return this.each(function(){var t,s=_(this),e=[],e=(e.push('<div class="'+o+'">'),e.push('<div class="'+p+'">'),e.push('<div class="'+v+'"></div>'),e.push("</div>"),e.push('<div class="'+g+'"></div>'),e.push('<div class="'+f+'">'+s.val()+"%</div>"),e.push("</div>"),_(e.join(""))),i=e.find("."+p),a=e.find("."+g),l=e.find("."+v),n=e.find("."+f),c=(s.after(e),s.hide(),!1),d=0,r=0,h=(e.css("width",u),Number(s.val())),r=u*h/100;a.css("left",r),l.width(r),n.html(parseInt(h)+"%"),a.mousedown(function(e){d=e.pageX-r,c=!0}),_(document).mouseup(function(){c=!1}),e.mousemove(function(e){c&&((r=e.pageX-d)<=0?r=0:u<r&&(r=u),a.css("left",r),l.width(r),e=parseInt(r/u*100),n.html(e+"%"),s.val(e),s.change())}),i.click(function(e){c||(t=i.offset().left,(r=e.pageX-t)<=0?r=0:u<r&&(r=u),a.css("left",r),l.animate({width:r},u),e=parseInt(r/u*100),n.html(e+"%"),s.val(e),s.change())})})}})}(window.jQuery);