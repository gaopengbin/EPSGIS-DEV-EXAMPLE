/* 2023-8-11 09:34:00 | 版权所有 山维科技 http://www.sunwaysurvey.com.cn */
function initTable(){$("#showEditor").hide(),$("#show").change(function(){var e=$(this).is(":checked");thisLayer.show=e}),$("#brightness").slider({min:0,max:3,step:.01,value:1}).on("change",function(e){e&&e.value&&setLayerOptions("brightness",e.value.newValue)}),$("#contrast").slider({min:0,max:3,step:.01,value:1}).on("change",function(e){e&&e.value&&setLayerOptions("contrast",e.value.newValue)}),$("#hue").slider({min:0,max:3,step:.01,value:.1}).on("change",function(e){e&&e.value&&setLayerOptions("hue",e.value.newValue)}),$("#saturation").slider({min:0,max:3,step:.01,value:1}).on("change",function(e){e&&e.value&&setLayerOptions("saturation",e.value.newValue)}),$("#gamma").slider({min:0,max:3,step:.01,value:.2}).on("change",function(e){e&&e.value&&setLayerOptions("gamma",e.value.newValue)}),$("#opacity").slider({min:0,max:1,step:.01,value:1}).on("change",function(e){e&&e.value&&setLayerOptions("opacity",e.value.newValue)});for(var e=map.getLayers(),a=e.length-1;0<=a;a--){var t=e[a];t.isPrivate||tileLayerList.push({key:t,name:"".concat(t.type," - ").concat(t.name||"未命名"),isTile:t.isTile})}selectedFirst(),addTable(),tileLayerList.lenght&&$("#showEditor").show(),map.on(mars3d.EventType.addLayer,function(e){var a=e.layer;thisLayer=e.layer,a.isPrivate||"POI查询"===a.name||(tileLayerList.push({key:a,name:"".concat(a.type," - ").concat(a.name||"未命名"),isTile:a.isTile}),selectedFirst(),addTable())}),map.on(mars3d.EventType.removeLayer,function(e){var a=e.layer,e=tileLayerList.findIndex(function(e){return e.key===a});tileLayerList.splice(e,1),addTable(),thisLayer===a&&(thisLayer=null),$("#layerName").html(""),$("#showEditor").hide()})}function selectedFirst(){setTimeout(function(){var e;1===tileLayerList.length&&(e=tileLayerList[0]).isTile&&($("#layerName").html(e.name),$("#showEditor").show(),thisLayer=map.getLayerById(e.key.id),$("#show").attr("checked",thisLayer))},50)}function setLayerOptions(e,a){thisLayer&&(thisLayer[e]=a)}function addTable(){var a=document.getElementById("tbPoly");a.innerHTML="",tileLayerList.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <tr>\n              <td>".concat(t.name,'</td>\n              <td>\n                <a class="flyTo" href="javascript:void(0)" title="飞行定位"><i class="fa fa-send-o"></i></a>&nbsp;&nbsp;\n                <a class="remove" href="javascript:void(0)" title="删除区域"><i class="fa fa-trash"></i></a>\n              </td>\n            </tr>'),a.appendChild(e),e.querySelector(".flyTo").addEventListener("click",function(e){var a=map.getLayerById(t.key.uuid);a&&a.flyTo()}),e.querySelector(".remove").addEventListener("click",function(e){var a=map.getLayerById(t.key.uuid);a&&a.remove(!0)})})}